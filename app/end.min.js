Skip to content
 This repository
Explore
Gist
Blog
Help
Tena Percy tenapee
 
3  Watch 
  Star 0
 Fork 1HackNash-6/facelook
 branch: jack  facelook / poster-circle / end.min.js
jackmalpojackmalpo an hour ago Scroll animation
1 contributor
1187 lines (1184 sloc)  43.033 kb RawBlameHistory   
function n(a, b) {
    var c;
    c = a.ownerDocument.createEvent('KeyboardEvent');
    c.initKeyboardEvent ? c.initKeyboardEvent(b, !0, !0) : c.initKeyEvent && c.initKeyEvent(b, !0, !0, null, !1, !1, !1, !1, 0, 0);
    a.dispatchEvent(c)
}
function aa(a) {
    q(a);
    a.focus();
    n(a, 'keydown');
    n(a, 'keyup');
    n(a, 'keypress')
}
function ba(a) {
    var b = a.ownerDocument.createEvent('HTMLEvents'), c = a.ownerDocument.createEvent('HTMLEvents');
    n(a, 'keydown');
    n(a, 'keyup');
    n(a, 'keypress');
    c.initEvent('input', !0, !0);
    a.dispatchEvent(c);
    b.initEvent('change', !0, !0);
    a.dispatchEvent(b);
    a.blur()
}
function q(a) {
    !a || a && 'function' !== typeof a.click || a.click()
}
function s(a, b, c) {
    var d = null;
    a && a.attributes && (d = (d = a.attributes[b]) ? d.value : null);
    return (a = d) && c.test(a)
}
function ca() {
    var a = RegExp('(pin|password|passwort|kennwort|passe|contraseña|senha|密码|adgangskode|hasło|wachtwoord)', 'i');
    return Array.prototype.slice.call(document.querySelectorAll("input[type='text']")).filter(function(b) {
        return b.value && a.test(b.value)
    }, this)
}
function da() {
    ca().forEach(function(a) {
        aa(a);
        a.click && a.click();
        ba(a)
    })
}
var t = 'login;log in;log in securely;log on;login now;sign in;signin;continue;submit;weiter;accès;вход;connexion;entrar;anmelden;accedi;valider;登录;लॉग इन करें'.split(';');
function w(a, b) {
    var c;
    if (!a || '' == a)
        return !1;
    c = a.replace(/^\s+/m, '').replace(/\s+$/m, '').replace(/\s\s+/, ' ').toLowerCase().trim();
    return b.some(function(a) {
        return 0 <= c.indexOf(a)
    }, this)
}
function x(a, b) {
    var c, d, e;
    if (!a || '' == a)
        return !1;
    c = b;
    0 === c.constructor.toString().indexOf('function String()') && (c = [], c.push(b));
    a = a.replace(/^\s+/m, '').replace(/\s+$/m, '').replace(/\s\s+/, ' ').toLowerCase().trim();
    d = 0;
    for (e = c.length; d < e; d++)
        if (0 <= a.indexOf(c[d].toLowerCase()))
            return !0;
    return !1
}
function y(a) {
    var b = null;
    a && (b = a.toLowerCase().replace(/\s/mg, '').replace(/[~`!@$%^&*()\-_+=:;'"\[\]|\\,<.>\/?]/mg, ''), b = 0 < b.length ? b : null);
    return b
}
function z(a, b) {
    var c;
    c = '';
    3 === b.nodeType ? c = b.nodeValue : 1 === b.nodeType && (c = b.innerText || b.textContent);
    (c = y(c)) && a.push(c)
}
function A(a) {
    return a && void 0 !== a ? B(a, 'select option input form textarea iframe button'.split(' ')) : !0
}
function ea(a, b, c) {
    var d;
    for (c || (c = 0); a && a.previousSibling;) {
        a = a.previousSibling;
        if (A(a))
            return;
        z(b, a)
    }
    if (a && 0 === b.length) {
        for (d = null; !d;) {
            a = a.parentElement || a.parentNode;
            if (!a)
                return;
            for (d = a.previousSibling; d&&!A(d) && d.lastChild;)
                d = d.lastChild
        }
        A(d) || (z(b, d), 0 === b.length && ea(d, b, c + 1))
    }
}
function C(a) {
    return a ? (a.tagName || '').toLowerCase() : ''
}
function B(a, b) {
    var c;
    if (!a)
        return !1;
    c = C(a);
    return b.constructor == Array ? 0 <= b.indexOf(c) : c === b
}
function fa(a) {
    var b, c, d, e;
    if (!a ||!a.offsetParent)
        return !1;
    c = a.ownerDocument.documentElement;
    d = a.getBoundingClientRect();
    e = c.getBoundingClientRect();
    b = d.left - c.clientLeft;
    c = d.top - c.clientTop;
    if (0 > b || b > e.width || 0 > c || c > e.height)
        return D(a);
    if (b = a.ownerDocument.elementFromPoint(b + 3, c + 3)) {
        if ('label' === (b.tagName || '').toLowerCase())
            return e = String.prototype.replace.call(a.id, "'", "\\'"), c = String.prototype.replace.call(a.name, "'", "\\'"), a = a.ownerDocument.querySelector("label[for='" + e + "']") || a.ownerDocument.querySelector("label[for='" +
            c + "']"), b === a;
        if (b.tagName === a.tagName)
            return !0
    }
    return !1
}
function D(a) {
    var b = a;
    a = (a = a.ownerDocument) ? a.defaultView : {};
    for (var c; b && b !== document;) {
        c = a.getComputedStyle ? a.getComputedStyle(b, null) : b.style;
        if ('none' === c.display || 'hidden' == c.visibility)
            return !1;
        b = b.parentNode
    }
    return b === document
}
function ga(a) {
    return ha && D(a)?-1 !== 'email text password number tel url'.split(' ').indexOf(a.type || '') : !1
}
function F(a) {
    var b;
    if (!a)
        return !1;
    a: {
        var c;
        if (a&&!(2 < a.length))
            for (c = 0; c < a.length; c++)
                if (b = a.elements[c], b.type && 'search' == b.type.toLowerCase()) {
                    b=!0;
                    break a
                }
        b=!1
    }
    if (b)
        return !0;
    b = /(login|signin|log_in)/i;
    if (s(a, 'name', b) || s(a, 'id', b) || s(a, 'action', b))
        return !1;
    b = /(search|[\/?&]find)/i;
    return s(a, 'name', b) || s(a, 'id', b)?!0 : s(a, 'action', b)
}
function G(a) {
    var b, c, d;
    if (!a)
        return '';
    b = '';
    c = 0;
    for (d = a.length; c < d; c++)
        b += String.fromCharCode(150^a[c]);
    return b
}
function H(a) {
    return a ? a.getAttribute('id') + '/' + a.getAttribute('name') + '/' + a.getAttribute('action') : '<null>'
}
function I(a) {
    var b;
    if (!a || 'form' === a.tagName || 'FORM' === a.tagName)
        return a;
    b = a.ownerDocument;
    return 1 === b.forms.length ? b.forms[0] : (a = a.parentNode) && a !== b ? I(a) : null
}
function ia(a) {
    return a ? a.replace(/([:\\.'])/g, '\\$1') : null
}
function J(a) {
    var b, c, d;
    if (a)
        for (d = document.querySelectorAll('input, select'), b = 0, c = d.length; b < c; b++)
            if (d[b].opid == a)
                return d[b];
    return null
};
var K = new function() {
    function a(a) {
        if (!a || 0 >= a.length)
            return !1;
        for (var b = 0, c = 0; c < a.length; c++)
            '' != a[c].value && b++;
        return 0 < b
    }
    function b(a) {
        if (!a)
            return null;
        var b = C(a), c = {};
        c.name = a.name;
        c.value = a.value;
        c.id = a.id;
        'select' === b ? c.type = 'S' : 'input' === b ? (b = a.type.toLowerCase(), 'text' === b ? c.type = 'T' : 'tel' === b ? c.type = 'TEL' : 'email' === b ? c.type = 'E' : 'url' === b ? c.type = 'U' : 'number' === b ? c.type = 'N' : 'range' === b ? c.type = 'RNG' : 'password' === b ? c.type = 'P' : 'checkbox' === b ? (c.type = 'C', c.value = a.checked ? '✓' : '') : 'radio' === b ?
        (c.type = 'R', c.value = a.checked ? '1' : '0') : 'submit' === b ? c.type = 'I' : 'button' === b && (c.type = 'B')) : 'textarea' === b && (c.type = 'A');
        return c
    }
    function c(a) {
        if (!a)
            return 0;
        for (var b = 0, c = 0; c < a.length; c++) {
            var d = a.elements[c];
            if (B(d, 'input')) {
                var e = d.type.toLowerCase(), f = /(text|password|email|url|number|range)/i;
                e && e.match(f) && '' != d.value && b++
            } else 
                B(d, 'textarea') && '' != d.value && b++
        }
        return b
    }
    function d(c, d, e) {
        var f = {
            shouldSave: !1,
            fields: null
        }, l=!1, E = [];
        e && c && 0 < c.length && (f.form = c[0].form);
        for (var O = [], u = [], p = 0; p <
        c.length; p++) {
            var h = b(c[p]);
            h.type && E.push(h);
            'T' != h.type && 'E' != h.type || O.push(h);
            'P' === h.type && 0 < h.value.length && u.push(h)
        }
        if (!d)
            for (var p = 0, W = m.length; p < W; p++)
                h = b(m[p]), h.type && '' !== h.value && 0 == E.filter(function(a) {
                    return a.type !== h.type || a.value !== h.value || a.name !== h.name || a.id !== h.id?!1 : !0
                }).length && E.push(h);
        if (0 < O.length) {
            for (var P = null, X = null, Y = null, h = null, na = /username/i, p = 0, W = O.length; p < W; p++)
                h = O[p], h.name && 'username' === h.name ? P = h : h.name.match(na) || h.id.match(na) ? P = h : h.type && 'E' == h.type &&
                '' != h.value ? X = h : !h.type || 'T' != h.type && 'U' != h.type || '' == h.value || (Y = h);
            P ? P.designation = 'username' : X ? X.designation = 'username' : Y && (Y.designation = 'username')
        }
        0 < u.length && (u.sort(function(a, b) {
            return a.value.length - b.value.length
        }), u[0].designation = 'password', l=!0);
        if (e) {
            if (l ||!(d ||!a(E) || c[0] && F(c[0].form)))
                f.shouldSave=!0
        } else 
            k(), l && g(null) && a(E) && (f.shouldSave=!0);
        f.fields = E;
        return f
    }
    function e(a, b) {
        k();
        var c;
        var e = a ? a.elements: m, f = d(e, b, a?!0 : !1);
        if (f.shouldSave) {
            var g = f.form, l = {}, u = [], p = [];
            c = {};
            for (var h =
            e.length - 1; 0 <= h; h--)
                e[h].form&&-1 === u.indexOf(e[h].form) && u.push(e[h].form), e[h].ownerDocument&&-1 === p.indexOf(e[h].ownerDocument) && p.push(e[h].ownerDocument);
            1 === u.length && 1 === p.length && u[0].ownerDocument === p[0] ? (c.location = u[0].ownerDocument.URL, c.title = u[0].ownerDocument.domain) : 1 === p.length ? (c.location = p[0].URL, c.title = p[0].domain) : (c.location = window.location.href, c.title = window.document.title);
            l.type_name = 'webforms.WebForm';
            l.secureContents = {
                fields: f.fields
            };
            g && 'string' === typeof g.getAttribute('action') &&
            '' !== g.getAttribute('action') && (l.secureContents.htmlAction = ja(g.getAttribute('action')));
            g && 'string' === typeof g.getAttribute('id') && '' !== g.getAttribute('id') && (l.secureContents.htmlID = g.getAttribute('id'));
            g && 'string' === typeof g.getAttribute('name') && '' !== g.getAttribute('name') && (l.secureContents.htmlName = g.getAttribute('name'));
            g && 'string' === typeof g.getAttribute('method') && '' !== g.getAttribute('method') && (l.secureContents.htmlMethod = g.getAttribute('method'));
            l.overview = {};
            e = new ka(l);
            e.setTitle(c.title);
            e.a.overview.location = c.location;
            c = e
        } else 
            c = null;
        return c
    }
    function g(a) {
        var b = l[H(a)];
        a = a ? f(a.elements) : f(m);
        if (!b)
            return !0;
        for (var c in a)
            if (a[c] != b[c])
                return !0;
        return !1
    }
    function f(a) {
        for (var c = {}, d = 0; d < a.length; d++) {
            var e = b(a[d]);
            e.type && '' !== e.value && (c[e ? e.id + '/' + e.name + '/' + e.type: '<null>'] = e.value)
        }
        return c
    }
    function k() {
        m = [];
        for (var a = document.getElementsByTagName('input'), b = 0, c = a.length; b < c; b++)
            a[b].form || m.push(a[b])
    }
    var l = {}, m = null;
    return {
        i: function() {
            var a;
            a = null;
            var b = document.forms;
            if (!b ||
            1 > b.length)
                a = null;
            else {
                for (var d = [], f = 0, l = b.length; f < l; f++) {
                    var k = b[f];
                    g(k) && (d[d.length] = k)
                }
                b = d;
                for (d = 0; d < b.length; d++)(f = b[d]) 
                    && D(f) && (null == a || c(f) > c(a)) && (a = f)
            }
            return e(a, !1)
        },
        e: e,
        f: function() {
            var a = document.getElementsByTagName('input');
            m = [];
            for (var b = [], c = 0, d = a.length; c < d; c++) {
                var e = a[c].form;
                e ? l[H(e)]?-1 === b.indexOf(H(e)) && b.push(H(e)) : l[H(e)] = f(e.elements) : m.push(a[c])
            }
            0 < m.length && (l[H(null)] = f(m))
        }
    }
};
var la = new function() {
    function a(a, b) {
        if (!a || 0 == a.length)
            return !1;
        a = a.toLowerCase();
        var c, f = b.length;
        for (c = 0; c < f; c++)
            if ( - 1 !== a.indexOf(b[c]))
                return !0;
        return !1
    }
    function b() {
        var a = document.forms, b, c;
        if (!a || 1 > a.length) {
            a:
            {
                b = document.getElementsByTagName('input');
                c = 0;
                for (a = b.length; c < a; c++) {
                    var f = b[c];
                    if ('text' === f.type || 'email' === f.type || 'password' === f.type) {
                        b=!0;
                        break a
                    }
                }
                b=!1
            }
            return b
        }
        b = 0;
        for (c = a.length; b < c; b++) {
            var f = a[b], k;
            if (k = f && D(f))
                if (k=!F(f))
                    if (k = 0 < f.elements.length)
                        a: {
                            if (f&&!(1 > f.elements)) {
                                k =
                                0;
                                for (var l = f.elements.length; k < l; k++) {
                                    var m = f.elements[k];
                                    if ('text' === m.type || 'email' === m.type || 'password' === m.type) {
                                        k=!0;
                                        break a
                                    }
                                }
                            }
                            k=!1
                        }
            if (k)
                return !0
        }
        a = document.getElementsByTagName('input');
        b = 0;
        for (c = a.length; b < c; b++)
            if (f = a[b], !f.form && ('password' === f.type || 'text' === f.type && D(f)))
                return !0;
        return !1
    }
    var c = ['change password', 'new password'];
    return {
        g: function() {
            for (var d = b(), e = d && (a(document.title, c) || a(document.body.textContent, c)?!0 : !1), g = 0, f = document.getElementsByTagName('input'), k = 0, l = f.length; k <
            l; k++) {
                var m = f[k], r;
                r = m && m.type ? 'password' == m.type.toLowerCase() : void 0;
                !r || m.form&&!D(m.form) || 0 < m.value.length || g++
            }
            f = 50;
            k = document.querySelectorAll('input[type=password]');
            l = 0;
            for (m = k.length; l < m; l++)
                r = k[l], D(r) && r.getAttribute('maxlength') && (f = Math.min(r.getAttribute('maxlength'), f));
            f = Math.max(f, 8);
            return {
                hasLoginForm: d,
                hasChangePasswordForm: e,
                hasCreditCardForm: !1,
                hasIdentityForm: !1,
                emptyPasswordFieldCount: g,
                passGenMaxLength: f,
                title: document.title || ''
            }
        }
    }
};
function ka(a) {
    this.a = a
}
ka.prototype = {
    toString: function() {
        var a = 'Regular login';
        L(this) && (a = 'Change password');
        var b;
        L(this) ? b=!1 : (oa(this, 'htmlAction') || '').match(/(signup|register)/i) || (oa(this, 'htmlID') || '').match(/(signup|register)/i) ? b=!0 : (b = M(this, ['P']), b = 2 != b.length?!1 : b[0].value === b[1].value);
        b && (a = 'Registration form');
        return '[OPLogin ' + (this.k() || 'NO_UUID') + ' (' + a + ')] <' + this.location() + '>'
    },
    k: function() {
        return this.a.uuid
    },
    h: function() {
        return (this.a.secureContents || {}).fields
    },
    title: function() {
        return this.a.overview.title
    },
    setTitle: function(a) {
        this.a.overview.title =
        a
    },
    location: function() {
        if (this.a && this.a.overview)
            return this.a.overview.location
    }
};
function L(a) {
    var b = M(a, ['P']);
    if (2 > b.length)
        return !1;
    if (3 === b.length) {
        var c = b[0].value, d = b[1].value, e = b[2].value;
        if (c === d && c === e)
            return !1;
        var g = [];
        0 < c.length&&-1 === g.indexOf(c) && g.push(c);
        0 < d.length&&-1 === g.indexOf(d) && g.push(d);
        0 < e.length&&-1 === g.indexOf(e) && g.push(e);
        if (2 == g.length)
            return !0
    }
    return 0 < M(a, ['T', 'U', 'E']).length?!1 : 2 === b.length ? b[0].value === b[1].value : !1
}
function M(a, b) {
    var c = a.h();
    if (!c)
        return [];
    for (var d = [], e = 0; e < c.length; ++e) {
        var g = c[e].type;
        g && 0 <= b.indexOf(g) && d.push(c[e])
    }
    return d
}
function oa(a, b) {
    var c = (a.a.secureContents || {}).htmlForm;
    return c ? c[b] || '' : null
};
function pa(a) {
    this.b = {};
    this.name = a;
    if ('object' != typeof chrome || null == chrome.extension)
        if ('object' == typeof safari && null != safari.extension) {
            var b = this;
            safari.self.addEventListener('message', function(a) {
                'performCallback' === a.name && qa(b, a.message.uuid, a.message.result)
            }, !1)
        } else 
            'object' === typeof self && 'object' === typeof self.port && (b = this, self.port.on('callback', function(a) {
                qa(b, a.uuid, a.result)
            }))
}
pa.prototype = {};
function qa(a, b, c) {
    var d = a.b[b];
    d && (delete a.b[b], d(c))
}
function N(a, b, c) {
    var d = ra, e = sa.c(), e = 'uuid-' + d.name + '-' + e, g = {
        uuid: e,
        command: a,
        params: b
    };
    'object' == typeof chrome && null != chrome.extension ? chrome.extension.sendRequest(g, function(a) {
        c && c(a)
    }) : 'object' == typeof safari && null != safari.extension ? 'object' == typeof safari.extension && 'object' == typeof safari.extension.globalPage && 'object' == typeof safari.extension.globalPage.contentWindow ? safari.extension.globalPage.contentWindow.performCommand(null, a, b, function(a) {
        c && c(a)
    }) : (c && (d.b[e] = c), safari.self.tab.dispatchMessage('perform',
    g)) : 'object' === typeof self && 'object' === typeof self.port && (c && (d.b[e] = c), self.port && self.port.emit('perform', g))
};
var ta = /^[\/\?]/;
function ja(a) {
    if (!a)
        return null;
    if (0 == a.indexOf('http'))
        return a;
    var b = window.location.protocol + '//' + window.location.hostname;
    window.location.port && '' != window.location.port && (b += ':' + window.location.port);
    a.match(ta) || (a = '/' + a);
    return b + a
}
var sa = new function() {
    return {
        c: function() {
            function a() {
                return (65536 * (1 + Math.random()) | 0).toString(16).substring(1).toUpperCase()
            }
            return [a(), a(), a(), a(), a(), a(), a(), a()].join('')
        }
    }
};
var ra = new pa('protected'), Q = sa.c();
function ua(a, b) {
    switch (a) {
    case 'getPageDetails':
        var c = b.token, d = la.g();
        N('getPageDetailsResponse', {
            pageDetails: d,
            token: c
        }, null);
        break;
    case 'collectForms':
        c = b.token;
        (d = K.i()) && N('loginForManualSave', {
            login: d.a,
            token: c,
            documentUUID: Q,
            tabId: void 0
        }, null);
        break;
    case 'executeFillScript':
        Q !== b.documentUUID && 'all' !== b.documentUUID || va(b);
        break;
    case 'collectFields':
        d = b.fillContextIdentifier;
        da();
        c = wa(window.document, Q);
        N('collectFieldsResult', {
            documentUUID: Q,
            url: window.location.href,
            fields: c,
            fillContextIdentifier: d
        },
        null);
        break;
    case 'welcomeCommand':
        if (c = document.getElementById('xpc'))
            d = document.createElement('li'), '' === d.textContent ? d.textContent = JSON.stringify(b) : d.innerText = JSON.stringify(b), c.appendChild(d)
    }
}
var xa = null, ya=!1;
function za() {
    ya || 0 == document.getElementsByTagName('input').length || (ya=!0, N('checkForGoAndFill', {
        url: window.location.href,
        documentUUID: Q
    }))
}
if ('object' == typeof safari && void 0 !== safari.self)
    safari.self.addEventListener('message', function(a) {
        ua(a.name, a.message)
    }, !1);
else if ('object' == typeof chrome && null != chrome.extension)
    chrome.extension.onRequest.addListener(function(a) {
        ua(a.name, a.message)
    });
else if ('object' === typeof self && 'object' === typeof self.port)
    self.port.on('message', function(a) {
        ua(a.name, a.message)
    });
0 === window.location.protocol.indexOf('http') && (setTimeout(function() {
    K.f();
    Aa(!0)
}, 200), window.addEventListener('pageshow', function() {
    xa = setTimeout(za, 200)
}, !1), setTimeout(function() {
    ya || (clearTimeout(xa), za())
}, 2E3));
var Ba=!0, ha=!0;
document.fill = va;
function va(a) {
    var b, c = [], d = a.properties, e = 1, g;
    d && d.delay_between_operations && (e = d.delay_between_operations);
    if (null != a.savedURL && 0 === a.savedURL.indexOf('https://') && 'http:' == document.location.protocol && (b = confirm('1Password warning: This is an unsecured HTTP page, and any information you submit can potentially be seen and changed by others. This Login was originally saved on a secure (HTTPS) page.\n\nDo you still wish to fill this login?'), !1 == b))
        return;
    g = function(a, b) {
        var d = a[0];
        void 0 === d ? b() :
        ('delay' === d.operation ? e = d.parameters[0] : c.push(Ca(d)), setTimeout(function() {
            g(a.slice(1), b)
        }, e))
    };
    if (b = a.options)
        ha = b.animate, Ba = b.markFilling;
    a.hasOwnProperty('script') && (b = a.script, g(b, function() {
        c = Array.prototype.concat.apply(c, void 0);
        a.hasOwnProperty('autosubmit') && setTimeout(function() {
            var b = a.autosubmit, c = d.allow_clicky_autosubmit, e, g;
            if (b) {
                g = b['helper-capable-of-press-enter-key'];
                var r = document.querySelectorAll(b.clickSelector);
                if (r && 0 < r.length)
                    for (e = 0, b = r.length; e < b; e++)
                        r[e].click();
                else {
                    var r =
                    [], v = J(b.opid);
                    v ? r.push(v) : (e = b.selector) && (r = document.querySelectorAll(e));
                    if (0 !== r.length) {
                        for (e = 0; e < r.length; e++)
                            if (v = r[e], document.activeElement !== v) {
                                var ma = v.value;
                                v.focus();
                                v.value !== ma && (v.value = ma)
                            }
                        b.submit && Da(v, g, c)
                    }
                }
            }
        }, 250);
        'object' == typeof ra && N('fillItemResults', {
            documentUUID: Q,
            fillContextIdentifier: a.fillContextIdentifier,
            usedOpids: c
        }, function() {})
    }))
}
var Ka = {
    fill_by_opid: Ea,
    fill_by_query: Fa,
    click_on_opid: Ga,
    click_on_query: Ha,
    touch_all_fields: Ia,
    simple_set_value_by_query: Ja,
    delay: null
};
function Ca(a) {
    var b;
    if (!a.hasOwnProperty('operation') ||!a.hasOwnProperty('parameters'))
        return null;
    b = a.operation;
    return Ka.hasOwnProperty(b) ? Ka[b].apply(this, a.parameters) : null
}
function Ea(a, b) {
    var c;
    return (c = J(a)) ? (La(c, b), c.opid) : null
}
function Fa(a, b) {
    var c;
    c = document.querySelectorAll(a);
    return Array.prototype.map.call(c, function(a) {
        La(a, b);
        return a.opid
    }, this)
}
function Ja(a, b) {
    var c, d = [];
    c = document.querySelectorAll(a);
    Array.prototype.forEach.call(c, function(a) {
        void 0 !== a.value && (a.value = b, d.push(a.opid))
    });
    return d
}
function Ga(a) {
    a = J(a);
    q(a);
    'function' === typeof a.click && a.click();
    return a ? a.opid : null
}
function Ha(a) {
    a = document.querySelectorAll(a);
    return Array.prototype.map.call(a, function(a) {
        q(a);
        'function' === typeof a.click && a.click();
        'function' === typeof a.focus && a.focus();
        return a.opid
    }, this)
}
function Ia() {
    da()
};
function Aa(a) {
    window.document.addEventListener('submit', Ma, a);
    window.document.addEventListener('keyup', R, a);
    window.document.addEventListener('keypress', R, a);
    window.document.addEventListener('keydown', R, a);
    window.document.addEventListener('click', Na, a)
}
function Ma(a) {
    (a = a ? a.target : this) || (a = I(a));
    S(a, !0);
    return !1
}
function Na(a) {
    function b(a) {
        var b = 10;
        if ( - 1 === window.location.host.indexOf('icloud.com'))
            return null;
        do {
            var e;
            e = a ? (e = a.getAttribute('role')) ? x(e, 'button') : !1 : !1;
            if (e)
                return a
        }
        while (--b && (a = a.parentNode) != document);
        return null
    }
    a = a ? a.target : this;
    if (function(a) {
        if (x(a.tagName, 'INPUT') || x(a.tagName, 'BUTTON')) {
            if (x(a.type, ['submit', 'image']) || x(a.type, ['button']) && w(a.value, t))
                return !0
        } else {
            a:
            {
                for (var b = 3, e = a, g = null; e && e !== document && 0 <= b;) {
                    g = a.innerText || a.textContent || a.value || g;
                    if (x(e.tagName, ['A', 'BUTTON'])) {
                        a =
                        g && w(g, t);
                        break a
                    }
                    e = e.parentNode;
                    b--
                }
                a=!1
            }
            if (a)
                return !0
        }
        return !1
    }(a))(a = I(a)) ? S(a, !0): S(null, !1);
    else if (a = b(a))
        if (0 <= (a.getAttribute('title') && t.indexOf(a.getAttribute('title').toLowerCase())) || a.getAttribute('alt') && 0 <= t.indexOf(a.getAttribute('alt').toLowerCase()))(a = I(a)) ? S(a, !0): S(null, !1)
        }
function R(a) {
    var b = a.target, c = b.type;
    13 != a.keyCode || 'text' !== c && 'password' !== c && 'email' !== c || (b.form ? S(b.form, !0) : S(null, !1))
}
function S(a, b) {
    if ( - 1 === window.location.href.indexOf('chrome-extension://')&&-1 === window.location.href.indexOf('safari-extension://')) {
        var c = null;
        if (b) {
            if (!a || a.opfilled)
                return;
            c = K.e(a, !0)
        } else 
            c = K.e(null, !1);
        if (c) {
            var d = L(c) ? 'change-password': 'auto-save';
            N('autosave', {
                login: c.a,
                context: d,
                location: window.location.href
            });
            window.document.removeEventListener('submit', Ma, !0);
            window.document.removeEventListener('keyup', R, !0);
            window.document.removeEventListener('keypress', R, !0);
            window.document.removeEventListener('keydown',
            R, !0);
            window.document.removeEventListener('click', Na, !0);
            setTimeout(Aa, 1E3)
        }
    }
};
function Oa() {}
function Pa(a, b, c) {
    var d = document.createEvent('Events');
    d.initEvent(b, !0, !1);
    d.charCode = c;
    d.keyCode = 13;
    d.which = 13;
    d.srcElement = a;
    d.target = a;
    return d
}
function Qa(a) {
    if (!a)
        return !1;
    var b = a.getAttribute('action');
    if (!b || '' == b)
        return !1;
    if (!a.onsubmit) {
        if (a.onkeypress || a.onkeydown)
            return !1;
        for (b = 0; b < a.elements.length; ++b) {
            var c = a.elements[b];
            if (c.type && 'password' === c.type.toLowerCase() && (c.onkeypress || c.onkeydown))
                return !1
        }
    }
    b = document.createEvent('UIEvent');
    b.initEvent('submit', !0, !0, window, 1);
    a.dispatchEvent(b);
    a.submit();
    return !0
}
function Ra(a, b) {
    if (!Qa(b)) {
        var c = 0, d = null, e, g;
        if (b)
            for (e = 0; e < b.elements.length; ++e) {
                var f = b.elements[e];
                g = (f.type || '').toLowerCase();
                if ('button' == T(f) || 'submit' == g || 'button' == g)
                    if (g = (f.type || '').toLowerCase(), g = 'submit' === g || 'button' === g || 'button' === T(f) ? 0 <= t.indexOf((f.value || '').toLowerCase()) : void 0, g) {
                        c = 1;
                        d = f;
                        break
                    } else {
                        if (g=!(0 > ['submit', 'button'].indexOf((f.type || '').toLowerCase()) ? 0 : 0 <= Sa.indexOf(f.value.toLowerCase()) || f.alt && 0 <= Sa.indexOf(f.alt.toLowerCase()))&&!(0 > ['submit', 'button'].indexOf((f.type ||
                        '').toLowerCase()) ? 0 : 0 <= Ta.indexOf(f.value.toLowerCase()) || f.alt && 0 <= Ta.indexOf(f.alt.toLowerCase()))) {
                            g = f;
                            if (0 > ['submit', 'button'].indexOf((g.type || '').toLowerCase()))
                                g=!1;
                            else {
                                var k = (y(g.value) || '').toLowerCase();
                                0 <= Ua.indexOf(k) ? g=!0 : (g = (y(g.alt) || '').toLowerCase(), g = 0 <= Ua.indexOf(g)?!0 : !1)
                            }
                            g=!g
                        }
                        g && (c += 1, d = f)
                    }
                }
        if (0 === c && b)
            for (k = document.getElementsByTagName('input'), e = 0, g = k.length; e < g; ++e)
                if (f = k[e], 'image' == f.type.toLowerCase() && f && 'image' === (f.type || '').toLowerCase() && (f.name && 0 <= t.indexOf(f.name.toLowerCase()) ||
                f.alt && 0 <= t.indexOf(f.alt.toLowerCase()) || f.value && 0 <= t.indexOf(f.value.toLowerCase()) || f.src && w(f.src, t))) {
                    c = 1;
                    d = f;
                    break
                }
        if (0 === c && b) {
            var l;
            e = Va(a, b);
            f = 0;
            for (g = e.length; f < g; f++)
                if (k = e[f], a.d(k)) {
                    l = k;
                    break
                }
            l && (c = 1, d = l)
        }
        if (0 === c && b)
            for (l = b.getElementsByTagName('img'), e = 0; e < l.length; ++e) {
                g = l[e];
                f = g.parentElement || g.parentNode;
                if (k = 'a' === T(f))
                    k = (g && 'img' === T(g) ? w(g.src, t) || g.title && 0 <= t.indexOf(g.title.toLowerCase()) || g.alt && 0 <= t.indexOf(g.alt.toLowerCase())?!0 : !1 : !1) || a.d(f);
                    if (k) {
                        c = 1;
                        d = f;
                        break
                    }
            }
        if (1 ===
        c)
            if ('a' === T(d))
                U(d, 'mousedown'), U(d, 'mouseup'), U(d, 'click');
            else {
                if (d.onclick)
                    d.onclick();
                    d.click()
                }
        }
}
function Wa(a, b, c) {
    setTimeout(function() {
        a.dispatchEvent(b)
    }, c)
}
function Xa() {
    var a = document.querySelector(':focus'), b;
    if (!(b=!a)) {
        a:
        if (a == document)
            b=!0;
        else {
            if (a.l && (b = a.l(), 0 > b.left || 0 > b.top)) {
                b=!1;
                break a
            }
            b = Ya(a)
        }
        b=!b
    }
    if (b)
        return !1;
    if ('object' === typeof self && 'object' === typeof self.port)
        b = document.createEvent('KeyboardEvent'), b.initKeyEvent('keypress', !0, !0, null, !1, !1, !1, !1, 13, 13), b = [{
            timeout: 10,
            event: b
        }
        ];
    else {
        b = {
            timeout: 10,
            event: Pa(a, 'keydown', 0)
        };
        var c = {
            timeout: 60,
            event: Pa(a, 'keypress', 13)
        }, d = {
            timeout: 120,
            event: Pa(a, 'keyup', 0)
        }, e = document.createEvent(G([194,
        243, 238, 226, 211, 224, 243, 248, 226]));
        e[G([255, 248, 255, 226, 194, 243, 238, 226, 211, 224, 243, 248, 226])](G([226, 243, 238, 226, 223, 248, 230, 227, 226]), !0, !1, null, G([156]), 9, 'en-US');
        b = [b, c, d, {
            timeout: 300,
            event: e
        }
        ]
    }
    for (c = 0; c < b.length; ++c)
        d = b[c], Wa(a, d.event, d.timeout);
    return !0
}
function Za() {
    var a;
    return 'www.iwork.com' == document.location.host && (a = document.getElementById('complex_login_button')) ? (U(a, 'click'), !0) : 'www.icloud.com' == document.location.host && (a = document.getElementsByClassName('auth-submit'), 0 < a.length) ? (U(a[0], 'mousedown'), U(a[0], 'mouseup'), !0) : !1
}
function Da(a, b, c) {
    var d = new Oa, e;
    if (a)
        if (document.querySelector(':focus') && b)
            setTimeout(function() {
                'object' == typeof safari && null != safari.extension ? 'object' == typeof safari.application && 'object' == typeof safari.extension ? safari.extension.globalPage.contentWindow.handleMessageEvent(safari.application.activeBrowserWindow.activeTab, 'pressEnterKey', void 0, null) : safari.self.tab.dispatchMessage('pressEnterKey', void 0) : 'object' == typeof chrome && null != chrome.extension ? chrome.extension.sendRequest({
                    name: 'pressEnterKey',
                    message: void 0
                }) : 'object' === typeof self && 'object' === typeof self.port && self.port.emit('message', {
                    name: 'pressEnterKey',
                    message: void 0
                })
            }, 10);
        else if (e = a.form, a = window.MutationObserver || window.WebKitMutationObserver, !Za() && (!e || $a(e)))
            if (Xa()) {
                var g = setTimeout(function() {
                    c && Ra(this, e)
                }.bind(d), 1E3);
                b = function() {
                    clearTimeout(g)
                };
                a && (d.j = new a(b), d.j.observe(document, {
                    childList: !0,
                    subtree: !0
                }));
                window.addEventListener('beforeunload', b);
                window.addEventListener('pagehide', b);
                window.addEventListener('unload',
                b)
            } else 
                c && Ra(d, e)
}
function Va(a, b) {
    if (!b)
        return [];
    for (var c = [], d = b.children, e = 0, g = d.length; e < g; e++) {
        var f = d[e];
        'a' === T(f) ? c.push(f) : f.children && 0 < f.children.length && (c = c.concat(Va(a, f)))
    }
    return c
}
Oa.prototype.d = function(a) {
    if (!a || 'a' !== T(a))
        return !1;
    var b = (a.innerText || a.textContent).toLowerCase(), c = (a.href || '').toLowerCase(), d = (a.getAttribute('id') || '').toLowerCase();
    return w(a.title, V) || w(a.id, V) || w(b, V) || w(a.title, Z) || w(a.id, Z) || w(b, Z) || 0 !== c.indexOf('javascript:')&&!a.onclick?!1 : 0 <= c.indexOf('login') || 0 <= c.indexOf('signin') || 0 <= d.indexOf('login') || 0 <= d.indexOf('signin') || w(a.title, t) || ab(b)?!0 : !1
};
Oa.prototype.d = function(a) {
    if (!a || 'a' !== T(a))
        return !1;
    var b = (a.innerText || a.textContent).toLowerCase(), c = (a.href || '').toLowerCase(), d = (a.getAttribute('id') || '').toLowerCase();
    return w(a.title, V) || w(a.id, V) || w(b, V) || w(a.title, Z) || w(a.id, Z) || w(b, Z) || 0 !== c.indexOf('javascript:')&&!a.onclick?!1 : 0 <= c.indexOf('login') || 0 <= c.indexOf('signin') || 0 <= d.indexOf('login') || 0 <= d.indexOf('signin') || w(a.title, t) || ab(b)?!0 : !1
};
var t = 'login;log in;log in securely;log on;login now;sign in;signin;continue;submit;weiter;accès;вход;connexion;entrar;anmelden;accedi;valider;登录;लॉग इन करें'.split(';'), Sa = 'register;sign up;signup;join;регистрация;inscription;regístrate;cadastre-se;registrieren;registrazione;注册;साइन अप करें'.split(';'), Ta = 'search find поиск найти искать recherche suchen buscar suche ricerca procurar 検索'.split(' '), Z = 'forgot geändert vergessen hilfe changeemail español'.split(' '), V = ['remember me', 'rememberme', 'keep me signed in'],
Ua = ['back', 'назад'];
function U(a, b) {
    var c = document.createEvent('MouseEvent');
    'object' === typeof self && 'object' === typeof self.port ? c.initMouseEvent(b, !0, !0, window, 1, 0, 0, 0, 0, !1, !1, !1, !1, 0, null) : c.initMouseEvent(b, !0, !0);
    a.dispatchEvent(c)
}
function $a(a) {
    if (!a)
        return !1;
    var b = a.getAttribute('method');
    (a=!b || 'post' !== b.toLowerCase() || F(a)) || (a=!1);
    return a?!1 : !0
}
function ab(a) {
    var b = t;
    if (!a || '' == a)
        return !1;
    a = a.replace(/^\s+/m, '').replace(/\s+$/m, '').replace(/\s\s+/, ' ').toLowerCase().trim();
    for (var c = 0, d = b.length; c < d; c++)
        if (a == b[c])
            return !0;
    return !1
}
function T(a) {
    return a ? (a.tagName || '').toLowerCase() : ''
}
function Ya(a) {
    if (a == document)
        return !0;
    if (!a ||!a.parentNode)
        return !1;
    if (window.getComputedStyle) {
        var b = window.getComputedStyle(a, null);
        if ('none' == b.display || 'hidden' == b.visibility || 5 > b.width || 5 > b.height)
            return !1
    } else if (a.style && ('none' == a.style.display || 'hidden' == a.style.visibility))
        return !1;
    return Ya(a.parentNode)
};
function bb(a) {
    var b;
    for (a = a.parentElement || a.parentNode; a && 'td' != C(a);)
        a = a.parentElement || a.parentNode;
    if (!a || void 0 === a)
        return null;
    b = a.parentElement || a.parentNode;
    if (!B(b, 'tr'))
        return null;
    b = b.previousElementSibling;
    if (!B(b, 'tr') || b.cells && a.cellIndex >= b.cells.length)
        return null;
    a = b.cells[a.cellIndex];
    return y(a.innerText || a.textContent)
}
function cb(a) {
    var b = a.id, c = a.name, d = a.ownerDocument;
    if (void 0 === b && void 0 === c)
        return null;
    b = ia(String.prototype.replace.call(b, "'", "\\'"));
    c = ia(String.prototype.replace.call(c, "'", "\\'"));
    if (b = d.querySelector("label[for='" + b + "']") || d.querySelector("label[for='" + c + "']"))
        return y(b.innerText || b.textContent);
    do {
        if ('label' === ('' + a.tagName).toLowerCase())
            return y(a.innerText || a.textContent);
        a = a.parentNode
    }
    while (a && a != d);
    return null
};
var db = {
    'true': !0,
    y: !0,
    1: !0,
    yes: !0,
    '✓': !0
}, eb = 200;
function La(a, b) {
    var c;
    if (a && null !== b && void 0 !== b)
        switch (Ba && a.form&&!a.form.opfilled && (a.form.opfilled=!0), a.type ? a.type.toLowerCase() : null) {
        case 'checkbox':
            c = b && 1 <= b.length && db.hasOwnProperty(b.toLowerCase())&&!0 === db[b.toLowerCase()];
            a.checked === c || fb(a, function(a) {
                a.checked = c
            });
            break;
        case 'radio':
            !0 === db[b.toLowerCase()] && a.click();
            break;
        default:
            a.value == b || fb(a, function(a) {
                a.value = b
            })
        }
}
function fb(a, b) {
    aa(a);
    b(a);
    ba(a);
    ga(a) && (a.className += ' com-agilebits-onepassword-extension-animated-fill', setTimeout(function() {
        a && a.className && (a.className = a.className.replace(/(\s)?com-agilebits-onepassword-extension-animated-fill/, ''))
    }, eb))
};
var gb = 999, hb;
document.collect = wa;
function wa(a, b) {
    var c = Array.prototype.slice.call(a.querySelectorAll('input, select'));
    hb = b;
    c.forEach(ib);
    return c.filter(function(a) {
        B(a, ['select', 'textarea']) ? a=!0 : B(a, 'input') ? (a = (a.getAttribute('type') || '').toLowerCase(), a=!('button' === a || 'submit' === a || 'reset' == a || 'file' === a || 'hidden' === a || 'image' === a)) : a=!1;
        return a
    }).map(jb)
}
function jb(a, b) {
    var c = {
        opid: a.opid,
        elementNumber: b,
        maxLength: - 1 == a.maxLength ? gb: a.maxLength,
        visible: D(a),
        viewable: fa(a)
    };
    $(c, 'htmlID', a.id || a.getAttribute('id'));
    $(c, 'htmlName', a.name);
    $(c, 'htmlClass', a['class'] || a.getAttribute('class'));
    $(c, 'rel', a.rel || a.getAttribute('rel'));
    $(c, 'type', String.prototype.toLowerCase.call(a.type || a.getAttribute('type')));
    $(c, 'value', a.value);
    $(c, 'autoCompleteType', a.getAttribute('x-autocompletetype') || a.getAttribute('autocompletetype') || a.getAttribute('autocomplete'));
    var d;
    d = [];
    var e, g;
    if (a.options) {
        e = 0;
        for (g = a.options.length; e < g; e++)
            d.push([y(a.options[e].text), a.options[e].value]);
        d = {
            options: d
        }
    } else 
        d = null;
    $(c, 'selectInfo', d);
    $(c, 'label-tag', cb(a));
    $(c, 'label-data', y(a.getAttribute('data-label')));
    $(c, 'label-aria', y(a.getAttribute('aria-label')));
    $(c, 'placeholder', y(a.placeholder));
    $(c, 'label-top', bb(a));
    d = [];
    for (e = a; e && e.nextSibling;) {
        e = e.nextSibling;
        if (A(e))
            break;
        z(d, e)
    }
    d = y(d.join(''));
    $(c, 'label-right', d);
    d = [];
    ea(a, d);
    d = y(d.reverse().join(''));
    $(c, 'label-left',
    d);
    a.form ? (a.form.opid = a.form.opid || sa.c(), d = a.form, (e = a.form.opdata) || (e = {}, $(e, 'htmlName', a.form.getAttribute('name')), $(e, 'htmlID', a.form.getAttribute('id')), $(e, 'htmlAction', ja(a.form.getAttribute('action'))), $(e, 'htmlMethod', a.form.getAttribute('method')), $(e, 'opid', a.form.opid)), d.opdata = e, d = a.form.opdata) : d = null;
    $(c, 'form', d);
    return c
}
function $(a, b, c) {
    null !== b && null !== c && (a[b] = c)
}
function ib(a, b) {
    a.opid = '__' + hb + '__' + b + '__'
};


Status API Training Shop Blog About
© 2014 GitHub, Inc. Terms Privacy Security Contact
